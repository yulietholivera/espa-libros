import{w as v,a as t,v as N,o as e,t as k}from"./chunk-QMGIS6GS-ClXNqF_9.js";import{s as C}from"./auth-BPhwfanI.js";import{L as S}from"./logo-D5a0bzcX.js";function F(){return[{title:"Registro de Usuario"}]}const A=v(function(){const[c,p]=t.useState(""),[m,g]=t.useState(""),[r,h]=t.useState(""),[o,b]=t.useState(""),[l,y]=t.useState(!1),[d,a]=t.useState(null),[u,x]=t.useState(!1),j=N(),w=async s=>{var f;if(s.preventDefault(),a(null),r!==o){a("Las contrase침as no coinciden");return}x(!0);try{const i=await fetch("/api/auth/registro",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:c,email:m,password:r,confirmPassword:o,esAdmin:l})}),n=await i.json();i.ok?(C(n.token),j("/")):a(((f=n.errores)==null?void 0:f.join(", "))||n.mensaje||"Error desconocido")}catch{a("No se pudo conectar al servidor")}finally{x(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-regal2-espalibros pb-96",children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsx(k,{to:"/",children:e.jsx("img",{src:S,alt:"Espa-Libros Logo",className:"mx-auto h-10 w-auto"})})}),e.jsx("h1",{className:"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900",children:"Registar Usuario"}),e.jsx("div",{className:"mt-3 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-900",children:"Nombre"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"nombre",name:"nombre",type:"text",required:!0,value:c,onChange:s=>p(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros sm:text-sm"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900",children:"Email"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:m,onChange:s=>g(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros sm:text-sm"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900",children:"Contrase침a"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:r,onChange:s=>h(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros sm:text-sm"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-900",children:"Confirmar Contrase침a"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:o,onChange:s=>b(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros sm:text-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex flex-grow flex-col",children:[e.jsx("span",{className:"text-sm font-medium leading-6 text-gray-900",children:"Administrador"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Activa esta opci칩n para dar privilegios de administrador."})]}),e.jsxs("label",{htmlFor:"is-admin-toggle",className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",id:"is-admin-toggle",className:"peer sr-only",checked:l,onChange:()=>y(!l)}),e.jsx("div",{className:"peer h-6 w-11 rounded-full bg-gray-200 border border-gray-400 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-regal-espalibros peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300"})]})]}),d&&e.jsx("p",{className:"text-red-600 text-sm",children:d}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"flex w-full justify-center rounded-md bg-regal-espalibros px-3 py-1.5 text-sm font-semibold text-white shadow-xs hover:bg-opacity-90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-regal-espalibros disabled:opacity-50",children:u?"Registrando...":"Registrar"})})]})})]})})})});export{A as default,F as meta};
