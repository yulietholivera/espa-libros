import{w as p,a as o,v as f,o as e,t as d}from"./chunk-QMGIS6GS-ClXNqF_9.js";import{s as h,a as b}from"./auth-BPhwfanI.js";import{L as j}from"./logo-D5a0bzcX.js";const k=p(function(){const[l,u]=o.useState(""),[r,x]=o.useState(""),[i,n]=o.useState(null),[c,m]=o.useState(!1);f();const g=async s=>{s.preventDefault(),m(!0),n(null),console.log(`💡 [Login] Intentando iniciar sesión con email: ${l}`);try{const t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:r})}),a=await t.json();if(console.log("✅ [Login] Respuesta completa del backend:",a),!t.ok)throw new Error(a.mensaje||"Error al iniciar sesión");h(a.token),b(a.usuario),console.log("✅ [Login] Token guardado en localStorage:",localStorage.getItem("token")),window.location.href="/"}catch(t){console.error("❌ [Login] Error en el handleSubmit:",t),n(t.message)}finally{m(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-regal2-espalibros pb-96 pt-24",children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsx(d,{to:"/",children:e.jsx("img",{src:j,alt:"Espa-Libros Logo"})})}),e.jsxs("div",{className:"mt-3 sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-center text-gray-800 mb-6",children:"Iniciar sesión"}),i&&e.jsx("p",{className:"text-sm text-red-600 mb-4",children:i}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Usuario:"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l,onChange:s=>u(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña:"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:s=>x(s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 placeholder-gray-400 focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"flex w-full justify-center rounded-md bg-regal-espalibros px-3 py-1.5 text-sm font-semibold text-white shadow-xs hover:bg-regal-espalibros-dark focus:outline-2 focus:outline-offset-2 focus:outline-regal-espalibros disabled:opacity-50",children:c?"Cargando...":"Iniciar sesión"})})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-500",children:["¿No eres miembro?"," ",e.jsx(d,{to:"/registrar",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Regístrate aquí"})]})]})]})})})});export{k as default};
